{"version":3,"sources":["webpack:///./src/js/init-scroll-listener.js","webpack:///./src/js/constants.js","webpack:///./src/index.js","webpack:///./src/js/validate-email.js","webpack:///./src/js/send-email.js"],"names":["initScrollListener","headerEl","document","querySelector","navigationEl","navEls","querySelectorAll","navigationOffsetTop","offsetTop","scrolled","fromTop","body","scrollTop","documentElement","scrollHeight","clientHeight","getElementById","style","width","window","pageYOffset","classList","add","remove","scrollY","forEach","link","section","hash","offsetHeight","FORM_INPUT_CLASS","INPUT_VALIDATION_ERROR_CLASS","subscribeNotify","notificationEl","opacity","setTimeout","onFormSubmit","event","preventDefault","input","currentTarget","test","value","email","fetch","method","JSON","stringify","then","addEventListener","forms","Array","from","form","target","contains"],"mappings":"2FAAO,SAASA,IACd,IAAMC,EAAWC,SAASC,cAAc,WAClCC,EAAeF,SAASC,cAAc,kBACtCE,EAASH,SAASI,iBAAiB,gBACnCC,EAAsBH,EAAaI,UA6CzC,OANA,WArCA,IAMQC,EAeFC,EAfED,GAJJP,SAASS,KAAKC,WAAaV,SAASW,gBAAgBD,YAEpDV,SAASW,gBAAgBC,aACzBZ,SAASW,gBAAgBE,cACa,IACxCb,SAASc,eAAe,eAAeC,MAAMC,MAAQT,EAAW,IAI5DU,OAAOC,YAAcb,GACvBH,EAAaiB,UAAUC,IAAI,UAC3BrB,EAASoB,UAAUC,IAAI,YAEvBlB,EAAaiB,UAAUE,OAAO,UAC9BtB,EAASoB,UAAUE,OAAO,WAKxBb,EAAUS,OAAOK,QAErBnB,EAAOoB,QAAQ,SAACC,GACd,IAAIC,EAAUzB,SAASC,cAAcuB,EAAKE,MAGxCD,EAAQnB,UAAY,KAAOE,GAC3BiB,EAAQnB,UAAYmB,EAAQE,aAAe,IAAMnB,EAEjDgB,EAAKL,UAAUC,IAAI,UAEnBI,EAAKL,UAAUE,OAAO,a,OCtCvB,IAEMO,EAAmB,wBACnBC,EAA+B,GAAH,OAAMD,EAAN,WCSzC,SAASE,IACP,IAAMC,EAAiB/B,SAASC,cAAc,8BAE9C8B,EAAehB,MAAMiB,QAAU,EAE/BC,WAAW,WACTF,EAAehB,MAAMiB,QAAU,GAC9B,KAGL,SAASE,EAAaC,GACpBA,EAAMC,iBAEN,IACMC,EADOF,EAAMG,cACArC,cAAL,WAAuB2B,ICzB9B,icAAicW,KD2BtbF,EAAMG,QE5BAC,EF6BZJ,EAAMG,ME5BXE,MAAM,cAAe,CAC1BC,OAAQ,OACRlC,KAAMmC,KAAKC,UAAU,CAAEJ,YF0BAK,KAAKhB,IAE5BO,EAAMlB,UAAUC,IAAIS,GAmBxBZ,OAAO8B,iBAAiB,mBAfxB,WACE,IAAMC,EAAQhD,SAASI,iBAAT,WDpCU,mBCqCxB6C,MAAMC,KAAKF,GAAOzB,QAAQ,SAAC4B,GACzBA,EAAKJ,iBAAiB,SAAUb,KAElCjB,OAAO8B,iBAAiB,SAAUjD,KAElCE,SAAS+C,iBAAiB,QAAS,SAACZ,GAC5BE,EAAQF,EAAMiB,OAChBf,EAAMlB,UAAUkC,SAASxB,IAC3BQ,EAAMlB,UAAUE,OAAOQ,S","file":"app.533b11417ee8ef3dab0a.js","sourcesContent":["export function initScrollListener() {\r\n  const headerEl = document.querySelector(\".header\");\r\n  const navigationEl = document.querySelector(\"#navigation-js\");\r\n  const navEls = document.querySelectorAll(\".nav-item-js\");\r\n  const navigationOffsetTop = navigationEl.offsetTop;\r\n\r\n  function updateProgressBar() {\r\n    const winScroll =\r\n      document.body.scrollTop || document.documentElement.scrollTop;\r\n    const height =\r\n      document.documentElement.scrollHeight -\r\n      document.documentElement.clientHeight;\r\n    const scrolled = (winScroll / height) * 100;\r\n    document.getElementById(\"progress-js\").style.width = scrolled + \"%\";\r\n  }\r\n\r\n  function stickyNavigation() {\r\n    if (window.pageYOffset > navigationOffsetTop) {\r\n      navigationEl.classList.add(\"sticky\");\r\n      headerEl.classList.add(\"margin\");\r\n    } else {\r\n      navigationEl.classList.remove(\"sticky\");\r\n      headerEl.classList.remove(\"margin\");\r\n    }\r\n  }\r\n\r\n  function markActiveSection() {\r\n    let fromTop = window.scrollY;\r\n\r\n    navEls.forEach((link) => {\r\n      let section = document.querySelector(link.hash);\r\n\r\n      if (\r\n        section.offsetTop - 120 <= fromTop &&\r\n        section.offsetTop + section.offsetHeight - 120 > fromTop\r\n      ) {\r\n        link.classList.add(\"active\");\r\n      } else {\r\n        link.classList.remove(\"active\");\r\n      }\r\n    });\r\n  }\r\n\r\n  function onScroll() {\r\n    updateProgressBar();\r\n    stickyNavigation();\r\n    markActiveSection();\r\n  }\r\n\r\n  return onScroll;\r\n}\r\n","export const FORM_CLASS = \"subscribe-form\";\r\n\r\nexport const FORM_INPUT_CLASS = \"subscribe-form__input\";\r\nexport const INPUT_VALIDATION_ERROR_CLASS = `${FORM_INPUT_CLASS}--error`;\r\n","import \"./sass/main.scss\";\r\n\r\nimport { initScrollListener } from \"./js/init-scroll-listener\";\r\nimport { sendEmail } from \"./js/send-email\";\r\nimport { validateEmail } from \"./js/validate-email\";\r\n\r\nimport {\r\n  FORM_CLASS,\r\n  FORM_INPUT_CLASS,\r\n  INPUT_VALIDATION_ERROR_CLASS,\r\n} from \"./js/constants\";\r\n\r\nfunction subscribeNotify() {\r\n  const notificationEl = document.querySelector(\"#subscribe-notification-js\");\r\n\r\n  notificationEl.style.opacity = 1;\r\n\r\n  setTimeout(() => {\r\n    notificationEl.style.opacity = 0;\r\n  }, 2000);\r\n}\r\n\r\nfunction onFormSubmit(event) {\r\n  event.preventDefault();\r\n\r\n  const form = event.currentTarget;\r\n  const input = form.querySelector(`.${FORM_INPUT_CLASS}`);\r\n\r\n  if (validateEmail(input.value)) {\r\n    sendEmail(input.value).then(subscribeNotify);\r\n  } else {\r\n    input.classList.add(INPUT_VALIDATION_ERROR_CLASS);\r\n  }\r\n}\r\n\r\nfunction main() {\r\n  const forms = document.querySelectorAll(`.${FORM_CLASS}`);\r\n  Array.from(forms).forEach((form) => {\r\n    form.addEventListener(\"submit\", onFormSubmit);\r\n  });\r\n  window.addEventListener(\"scroll\", initScrollListener());\r\n\r\n  document.addEventListener(\"input\", (event) => {\r\n    const input = event.target;\r\n    if (input.classList.contains(INPUT_VALIDATION_ERROR_CLASS)) {\r\n      input.classList.remove(INPUT_VALIDATION_ERROR_CLASS);\r\n    }\r\n  });\r\n}\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", main);\r\n","export function validateEmail(value) {\r\n  return /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/.test(\r\n    value\r\n  );\r\n}\r\n","export function sendEmail(email) {\r\n  return fetch(\"/api/signup\", {\r\n    method: \"POST\",\r\n    body: JSON.stringify({ email }),\r\n  });\r\n}\r\n"],"sourceRoot":""}